os: linux
language: python

cache:
  pip: true
  directories:
    - $HOME/.ccache
    - libs

python:
  - 3.7

env:
  global:
    - USE_CCACHE=1
    - CCACHE_SLOPPINESS=pch_defines,time_macros
    - CCACHE_COMPRESS=1
    - CCACHE_MAXSIZE=70M
    - PATH="/usr/lib/ccache:$PATH"
    - LIBXML2_VERSION=2.9.10
    - LIBXSLT_VERSION=1.1.34
  matrix:
    - STATIC_DEPS=false
    - STATIC_DEPS=true

matrix:
  include:
    - python: 3.7
      arch: arm64
      env: STATIC_DEPS=false EXTRA_DEPS="coverage<5"

install:
    - pip install -U pip wheel
    - if [ -z "${TRAVIS_PYTHON_VERSION##*-dev}" ];
        then pip install --install-option=--no-cython-compile https://github.com/cython/cython/archive/master.zip;
        else pip install -r requirements.txt;
      fi
    - pip install -U beautifulsoup4 cssselect html5lib rnc2rng ${EXTRA_DEPS}

script:
  - echo "Script section"
